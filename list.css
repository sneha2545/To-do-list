/* =========================
   ToDo List Styles (Refactor)
   - Design tokens (CSS variables)
   - Base & resets
   - Layout & header
   - Form controls
   - Buttons & filters
   - Task list & states
   - Utilities & responsive
   ========================= */

/* Design tokens */
:root {
  --bg-grad-start: #7f53ac;
  --bg-grad-end: #c3cfe2;
  --brand-primary: #647dee;
  --brand-secondary: #7f53ac;
  --brand-danger: #ed7575;
  --brand-success: #1ea97c;
  --surface: #ffffff;
  --surface-muted: #f7f8fc;
  --text-primary: #1f2937;
  --text-secondary: #6b7280;
  --ring: rgba(100, 125, 222, 0.45);
  --shadow: 0 8px 24px rgba(100, 125, 222, 0.18);
  --radius-lg: 18px;
  --radius-md: 10px;
  --radius-sm: 6px;
  --transition-fast: 0.2s ease;
  --transition-med: 0.3s ease;
}

/* Base */
* { box-sizing: border-box; }
html, body { height: 100%; }
body {
  margin: 0;
  font-family: "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
  color: var(--text-primary);
  background: linear-gradient(135deg, var(--bg-grad-start) 0%, var(--bg-grad-end) 100%);
  background-attachment: fixed;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Layout */
.container {
  background: var(--surface);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow);
  padding: 32px 24px;
  margin-top: 40px;
}
header.bg-success {
  background: linear-gradient(90deg, var(--brand-secondary) 0%, var(--brand-primary) 100%) !important;
}
header h1 { color: #101827; font-weight: 800; letter-spacing: 0.2px; }

h2, h3 { color: var(--brand-primary); font-weight: 700; }

/* Form controls */
#item, #search, #dueDate, #priority {
  border-radius: var(--radius-md);
  border: 2px solid var(--brand-primary);
  font-size: 1.05rem;
  padding: 10px 14px;
  transition: border var(--transition-fast), box-shadow var(--transition-fast);
}
#item:focus, #search:focus, #dueDate:focus, #priority:focus {
  border-color: var(--brand-secondary);
  outline: none;
  box-shadow: 0 0 0 4px var(--ring);
}
#search { max-width: 280px; }
#priority { min-width: 170px; }

/* Buttons & filters */
.btn-dark {
  background: linear-gradient(90deg, var(--brand-secondary) 0%, var(--brand-primary) 100%);
  border: none;
  border-radius: var(--radius-md);
  padding: 10px 18px;
  transition: transform var(--transition-fast), box-shadow var(--transition-fast);
}
.btn-dark:hover { transform: translateY(-1px); box-shadow: 0 6px 18px rgba(100,125,222,0.25); }

.filter-btn {
  margin-right: 6px;
  border-radius: var(--radius-sm);
  font-weight: 600;
  border: 2px solid var(--brand-primary) !important;
  color: var(--brand-primary);
  background: transparent;
  transition: background var(--transition-fast), color var(--transition-fast), box-shadow var(--transition-fast);
}
.filter-btn:hover { background: var(--surface-muted); }
.filter-btn.active, .filter-btn:focus {
  background: var(--brand-primary) !important;
  color: #fff !important;
  box-shadow: 0 0 0 4px var(--ring);
}

#clear-completed {
  border-radius: var(--radius-sm);
  font-weight: 600;
  border: 2px solid var(--brand-danger);
  color: var(--brand-danger);
}
#clear-completed:hover { background: var(--brand-danger); color: #fff; }

#task-count {
  font-size: 1.05rem;
  background: var(--brand-primary);
  color: #fff;
  border-radius: var(--radius-sm);
  padding: 6px 14px;
  font-weight: 600;
}

/* Task list */
.list-group { margin-top: 8px; }
.list-group-item {
  background: #fff;
  border: 1px solid #eef1f7;
  border-radius: var(--radius-md);
  margin-bottom: 12px;
  box-shadow: 0 2px 10px rgba(18, 38, 63, 0.06);
  font-size: 1.05rem;
  display: flex;
  align-items: center;
  padding: 10px 12px;
  transition: background var(--transition-fast), transform var(--transition-fast), box-shadow var(--transition-fast);
  animation: fadeIn var(--transition-med);
  /* allow items to wrap when space is tight */
  flex-wrap: wrap;
  gap: 8px;
}
.list-group-item:hover { transform: translateY(-1px); box-shadow: 0 6px 18px rgba(18,38,63,0.10); }

/* Priority accents via left border */
#items li[data-priority="low"] { border-left: 6px solid #31c48d; }
#items li[data-priority="medium"] { border-left: 6px solid #f59e0b; }
#items li[data-priority="high"] { border-left: 6px solid #ef4444; }

/* Checkbox */
.complete-check {
  accent-color: var(--brand-primary);
  width: 22px; height: 22px; margin-right: 12px;
  transition: transform var(--transition-fast);
}
.complete-check:active { transform: scale(0.9); }

/* Text & meta */
.list-group-item .text {
  flex: 1 1 200px;
  min-width: 0;
  word-break: break-word;
}
.list-group-item .meta {
  flex: 0 1 auto;
  white-space: normal; /* allow wrapping so badge text isn't clipped */
  margin-left: auto;
  gap: 8px;
}

/* Priority badges */
.priority-badge {
  border-radius: var(--radius-sm);
  padding: 4px 10px;
  font-weight: 600;
  letter-spacing: 0.2px;
  max-width: 100%;
  overflow: visible;
  text-overflow: clip;
  margin-left: 8px;
  border: 1px solid rgba(0,0,0,0.06);
  display: inline-block;
}
.priority-low { background: #eafff4; color: #197a55; }
.priority-medium { background: #fff6df; color: #8a5a14; }
.priority-high { background: #ffe8e8; color: #9f2b2b; }

/* Due date */
.due-date { font-size: 0.85rem; color: var(--text-secondary); margin-left: 10px; }

/* States */
.list-group-item.completed { background: #fafafa; }
.list-group-item.completed .text { text-decoration: line-through; color: #9aa3af; }
#empty-state { font-style: italic; color: var(--text-secondary); }

/* Editing state */
#items li.editing { outline: 2px dashed var(--brand-secondary); outline-offset: 2px; }

/* Animations */
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(3px); }
  to { opacity: 1; transform: translateY(0); }
}

/* 3D scene and card styling */
.scene {
  perspective: 1200px;
  perspective-origin: 50% 20%;
}
.app-card {
  transform-style: preserve-3d;
  background: var(--surface);
  border-radius: var(--radius-lg);
  box-shadow: 0 12px 30px rgba(18, 38, 63, 0.16), 0 2px 8px rgba(18, 38, 63, 0.06);
  transition: transform 0.35s ease, box-shadow 0.35s ease;
}
#app-card-header { margin-top: 24px; }
#app-card-main { will-change: transform; }
.app-card:hover {
  transform: none;
  box-shadow: 0 12px 30px rgba(18, 38, 63, 0.16), 0 2px 8px rgba(18, 38, 63, 0.06);
}
.brand-dot {
  width: 12px; height: 12px; border-radius: 50%;
  background: radial-gradient(circle at 30% 30%, var(--brand-secondary), var(--brand-primary));
  box-shadow: 0 0 0 3px rgba(100,125,222,0.25), 0 0 18px rgba(127,83,172,0.35);
}

/* Subtle floating animation for header dot */
@keyframes float {
  0% { transform: translateZ(20px) translateY(0); }
  50% { transform: translateZ(20px) translateY(-6px); }
  100% { transform: translateZ(20px) translateY(0); }
}
.brand-dot { animation: float 3s ease-in-out infinite; }

/* Animate list items in with stagger */
.list-group-item { opacity: 0; transform: translateY(6px) translateZ(0); animation: itemIn 420ms ease forwards; }
.list-group-item:nth-child(1) { animation-delay: 60ms; }
.list-group-item:nth-child(2) { animation-delay: 120ms; }
.list-group-item:nth-child(3) { animation-delay: 180ms; }
.list-group-item:nth-child(4) { animation-delay: 240ms; }
@keyframes itemIn { to { opacity: 1; transform: translateY(0) translateZ(0); } }

/* Interactive hover depth for list items */
.list-group-item:hover { transform: none; box-shadow: 0 2px 10px rgba(18,38,63,0.06); }

/* Focus halo for accessibility */
.list-group-item:focus-within { box-shadow: 0 0 0 4px var(--ring); }

/* Micro-interactions */
.complete-check:active { transform: scale(0.9) translateZ(0); }
.edit:hover, .delete:hover { transform: translateY(-1px); }

/* Polished header typography */
header h1 { letter-spacing: 0.3px; font-weight: 900; }

/* Animated removal state */
@keyframes itemOut {
  to { opacity: 0; transform: translateY(8px) scale(0.98); }
}
.list-group-item.removing {
  animation: itemOut 220ms ease forwards;
}

/* Parallax support: when JS enables it, hover transform is disabled to avoid conflict */
.parallax-enabled.app-card:hover { transform: none; box-shadow: 0 12px 30px rgba(18, 38, 63, 0.16), 0 2px 8px rgba(18, 38, 63, 0.06); }

/* Reduced motion: tone down animations and transitions */
@media (prefers-reduced-motion: reduce) {
  * { animation-duration: 0.001ms !important; animation-iteration-count: 1 !important; transition-duration: 0.001ms !important; scroll-behavior: auto !important; }
  .app-card, .list-group-item { transform: none !important; }
  body { animation: none !important; }
}

/* Responsive */
@media (max-width: 768px) {
  .container { padding: 20px 14px; }
  h2, h3 { font-size: 1.15rem; }
  #search { width: 100%; max-width: none; margin-top: 8px; }
  .list-group-item { font-size: 1rem; }
  /* move meta to next line for readability on small screens */
  .list-group-item .meta {
    flex-basis: 100%;
    margin-left: 34px; /* align under text after checkbox */
  }
}
